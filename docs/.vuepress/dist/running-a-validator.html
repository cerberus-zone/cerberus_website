<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cerberus Zone - Running a validator | Cerberus</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/website_logo.png">
    <meta name="description" content="Documentation for running a Cerberus validator">
    
    <link rel="preload" href="/assets/css/0.styles.1353369c.css" as="style"><link rel="preload" href="/assets/js/app.efce6416.js" as="script"><link rel="preload" href="/assets/js/2.a60af671.js" as="script"><link rel="preload" href="/assets/js/9.77b6a1d4.js" as="script"><link rel="prefetch" href="/assets/js/3.1e97dab3.js"><link rel="prefetch" href="/assets/js/4.b7d0708f.js"><link rel="prefetch" href="/assets/js/5.9e2f4ca7.js"><link rel="prefetch" href="/assets/js/6.c7b54f12.js"><link rel="prefetch" href="/assets/js/7.8e80402c.js"><link rel="prefetch" href="/assets/js/8.ba109c6f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1353369c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Cerberus</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/index/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/faq/" class="nav-link">
  Airdrop FAQ
</a></div><div class="nav-item"><a href="/running-a-validator/" class="nav-link">
  Running a validator
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/index/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/faq/" class="nav-link">
  Airdrop FAQ
</a></div><div class="nav-item"><a href="/running-a-validator/" class="nav-link">
  Running a validator
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="running-a-cerberus-validator"><a href="#running-a-cerberus-validator" class="header-anchor">#</a> <strong>Running a Cerberus validator</strong></h1> <div style="text-align:center;margin-top:25px;margin-bottom:50px;"><a href="https://twitter.com/CerberusZone" target="_blank"><img src="/website_logo.png" alt="Cerberus" style="width:500px;"></a></div> <p></p><div class="table-of-contents"><ul><li><a href="#purpose-of-document">Purpose of document</a></li><li><a href="#validator-installation-steps">Validator Installation Steps</a><ul><li><a href="#installing-prerequisites">Installing Prerequisites</a></li><li><a href="#installing-go-from-source">Installing Go from source</a></li><li><a href="#installing-cerberus-from-source">Installing Cerberus from source</a></li></ul></li><li><a href="#configuring-cerberus-node">Configuring Cerberus node</a><ul><li><a href="#initiate-chain">Initiate Chain</a></li><li><a href="#setting-persistent-peers">Setting Persistent Peers</a></li><li><a href="#download-the-genesis-file">Download the Genesis file</a></li><li><a href="#create-keys-cerberus-wallet-address">Create keys/Cerberus wallet address</a></li></ul></li><li><a href="#starting-validator-node">Starting Validator Node</a><ul><li><a href="#starting-cerberus-validator-node">Starting Cerberus Validator Node</a></li><li><a href="#running-cerberus-as-a-service-systemd">Running Cerberus as a Service (systemd)</a></li></ul></li><li><a href="#checking-cerberus-validator-node-status">Checking Cerberus validator node status</a><ul><li><a href="#checking-cerberusd-service-status">Checking cerberusd service status</a></li><li><a href="#viewing-cerberus-validator-logs">Viewing Cerberus validator logs</a></li></ul></li><li><a href="#genesis-validator-setup">Genesis Validator Setup</a><ul><li><a href="#genesis-validators-additional-steps">Genesis Validators additional steps</a></li><li><a href="#creating-a-genesis-account">Creating a genesis account</a></li><li><a href="#create-the-gentx">Create the gentx</a></li><li><a href="#submit-pull-request-with-gentx-and-peed-id">Submit Pull Request with Gentx and peed id</a></li></ul></li></ul></div><p></p> <h2 id="purpose-of-document"><a href="#purpose-of-document" class="header-anchor">#</a> Purpose of document</h2> <p>This document will outline step by step how to set up and configure a Cerberus validator to run on a Linux-based OS.</p> <h2 id="validator-installation-steps"><a href="#validator-installation-steps" class="header-anchor">#</a> Validator Installation Steps</h2> <h3 id="installing-prerequisites"><a href="#installing-prerequisites" class="header-anchor">#</a> Installing Prerequisites</h3> <p>The following are necessary to build the Cerberus binary from the source. It will install all the needed dependencies to complete the Cerberus blockchain node software installation.</p> <div class="language-bash: extra-class"><pre class="language-text"><code># update the local package list and install any available upgrades
sudo apt-get update &amp;&amp; sudo apt upgrade -y
# install toolchain and ensure accurate time synchronization
sudo apt-get install make build-essential gcc git jq chrony -y
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">Note</p> <p>If running a Red Hat distro of Linux, you will have to run your commands using <em>yum</em>. See the example below.</p></div> <p>Example using yum package manager. Going forward, the remainder of the documentation all instructions will be using <em>apt-get</em>.</p> <div class="language-bash: extra-class"><pre class="language-text"><code># update the local package list and install any available upgrades
sudo yum update &amp;&amp; sudo yum upgrade -y
# install toolchain and ensure accurate time synchronization
sudo yum install make build-essential gcc git jq chrony -y
</code></pre></div><h3 id="installing-go-from-source"><a href="#installing-go-from-source" class="header-anchor">#</a> Installing Go from source</h3> <div class="language-bash: extra-class"><pre class="language-text"><code>cd $HOME &amp;&amp; sudo wget https://go.dev/dl/go1.17.6.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.17.6.linux-amd64.tar.gz
export PATH=$PATH:/usr/local/go/bin
go version
</code></pre></div><p>Output should be: go version go1.17.5 linux/amd64</p> <p>Alternatively, you can follow the instructions <a href="https://golang.org/doc/install" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to install Go.</p> <h3 id="installing-cerberus-from-source"><a href="#installing-cerberus-from-source" class="header-anchor">#</a> Installing Cerberus from source</h3> <h4 id="_1-clone-repository"><a href="#_1-clone-repository" class="header-anchor">#</a> 1. Clone repository</h4> <p>Note be sure you are in $HOME directory; if not run:</p> <div class="language-bash: extra-class"><pre class="language-text"><code>cd $HOME
</code></pre></div><p>Next, run the commands below.</p> <div class="language-bash: extra-class"><pre class="language-text"><code>git clone https://github.com/cerberus-zone/cerberus.git
cd cerberus
git checkout latest

# this step may take several minutes to complete
make install &amp;&amp; cd ~/go/bin &amp;&amp; sudo cp cerberusd /usr/local/bin
</code></pre></div><p>Having the <em>cerberusd</em> binary located in your <em>/usr/local/bin</em> will ensure that when you type <em>cerberusd</em> your OS will find the executable binary.</p> <h2 id="configuring-cerberus-node"><a href="#configuring-cerberus-node" class="header-anchor">#</a> Configuring Cerberus node</h2> <h3 id="initiate-chain"><a href="#initiate-chain" class="header-anchor">#</a> Initiate Chain</h3> <p>This step will create all the configuration files needed to run your validator node. The <em>MONIKER_NAME</em> name can be whatever you would like it to be.</p> <div class="language-bash: extra-class"><pre class="language-text"><code>export MONIKER_NAME=cerberus_validator
cerberusd init $MONIKER_NAME --chain-id cerberus-1
</code></pre></div><p>You should see output similar to the image below.</p> <div style="text-align:center;"><a href="docs/chain_init.png" target="_blank"><img src="docs/chain_init.png" alt="Cerberus" style="width:1000px;"></a></div> <p>After running the commands above, all node configuration files have been set up.</p> <h3 id="setting-persistent-peers"><a href="#setting-persistent-peers" class="header-anchor">#</a> Setting Persistent Peers</h3> <p>In this section you will add peers to begin communicating with the Cerberus blockchain.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>This section will be updated at a later date after the main Cerberus chain has launched.</p></div> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sed</span> -i <span class="token string">'s/persistent_peers = &quot;&quot;/persistent_peers=&quot;&lt;peer_id&gt;@&lt;ip-address&gt;:26656&quot;/g'</span> <span class="token environment constant">$HOME</span>/.cerberus/config/config.toml
<span class="token function">sed</span> -i <span class="token string">'s/persistent_peers = &quot;&quot;/persistent_peers=&quot;&lt;peer_id&gt;@&lt;ip-address&gt;:26656&quot;/g'</span> <span class="token environment constant">$HOME</span>/.cerberus/config/config.toml
</code></pre></div><h3 id="download-the-genesis-file"><a href="#download-the-genesis-file" class="header-anchor">#</a> Download the Genesis file</h3> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>The current genesis file is for development only. Once the chain goes live the genesis.json will be updated.</p></div> <p>To download the genesis file, you will want to run the commands below. The genesis file is required to join the validator node to the Cerberus blockchain.</p> <div class="language-bash: extra-class"><pre class="language-text"><code>cd $HOME/.cerberus/config/
wget -O $HOME/.cerberus/config/genesis.json \
https://raw.githubusercontent.com/cerberus-zone/cerberus_genesis/main/genesis.json
</code></pre></div><h3 id="create-keys-cerberus-wallet-address"><a href="#create-keys-cerberus-wallet-address" class="header-anchor">#</a> Create keys/Cerberus wallet address</h3> <p>The key-name can be whatever you would like it to be. You probably want to name it based on what the wallet address will be used for.</p> <p>Create key command</p> <div class="language-bash: extra-class"><pre class="language-text"><code># To create new keypair - make sure you save the mnemonics!
cerberusd keys add &lt;key-name&gt;
</code></pre></div><p>Create key command example</p> <div class="language-bash: extra-class"><pre class="language-text"><code># To create new keypair - make sure you save the mnemonics!
cerberusd keys add cerberus_validator_key
</code></pre></div><p>The command above will generate mnemonics like most blockchain wallets. You will want to store this is in a safe place. We recommend against storing your mnemonics backup in cloud storage. The mnemonics will not be displayed again on the screen once you close the terminal window.</p> <h2 id="starting-validator-node"><a href="#starting-validator-node" class="header-anchor">#</a> Starting Validator Node</h2> <h3 id="starting-cerberus-validator-node"><a href="#starting-cerberus-validator-node" class="header-anchor">#</a> Starting Cerberus Validator Node</h3> <p>You must run the command below to have your validator node sync with the Cerberus blockchain. This will start the sync process for you.</p> <div class="language-bash: extra-class"><pre class="language-text"><code>cerberusd start
</code></pre></div><p>Once you have successfully tested that your Cerberus validator will start, you will want to run it as a service to ensure it is always running. See instructions for <em>Running Cerberus as a Service (systemd)</em></p> <h3 id="running-cerberus-as-a-service-systemd"><a href="#running-cerberus-as-a-service-systemd" class="header-anchor">#</a> Running Cerberus as a Service (systemd)</h3> <p>This section will walk you through how to run your Cerberus validator node as a service.</p> <h4 id="_1-creating-the-cerberusd-service-file"><a href="#_1-creating-the-cerberusd-service-file" class="header-anchor">#</a> 1. Creating the cerberusd.service file</h4> <div class="language-bash: extra-class"><pre class="language-text"><code># creates the cerberusd.service file and puts it in text editor mode
sudo touch /etc/systemd/system/cerberusd.service &amp;&amp; \
sudo nano /etc/systemd/system/cerberusd.service
</code></pre></div><h4 id="_2-add-service-configuration-info"><a href="#_2-add-service-configuration-info" class="header-anchor">#</a> 2. Add service configuration info</h4> <p>You will now add the info you see below to your cerberusd.service file and save the file.</p> <div class="language- extra-class"><pre class="language-text"><code>[Unit]
Description=Cerberus Node
After=network-online.target

[Service]
User=ssm-user
ExecStart=/usr/local/bin/cerberusd start
Restart=always
RestartSec=3
LimitNOFILE=4096

[Install]
WantedBy=multi-user.target
</code></pre></div><h4 id="_3-start-cerberusd-service"><a href="#_3-start-cerberusd-service" class="header-anchor">#</a> 3. Start <em>cerberusd</em> service</h4> <p>Next, run the commands below to ensure that the service restart when you restart the server. The second command starts the <em><strong>cerberusd</strong></em> service.</p> <div class="language-bash: extra-class"><pre class="language-text"><code># Enable service to start when server starts
sudo systemctl enable cerberusd

# Starts the cerberusd service
sudo systemctl start cerberusd
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">Note</p> <p>If you started a new terminal window to run further commands, be sure you stopped the node when you ran cerberusd start. You would receive an error when you run sudo systemctl start cerberusd if you did not stop the node from running.</p></div> <h2 id="checking-cerberus-validator-node-status"><a href="#checking-cerberus-validator-node-status" class="header-anchor">#</a> Checking Cerberus validator node status</h2> <h3 id="checking-cerberusd-service-status"><a href="#checking-cerberusd-service-status" class="header-anchor">#</a> Checking cerberusd service status</h3> <p>You can check the status of your Cerberus node by running the following command.</p> <div class="language-bash: extra-class"><pre class="language-text"><code># checking the status of the cerberusd service
sudo systemctl status cerberusd
</code></pre></div><p>You should then a screen similar to the screen pictured below.</p> <div style="text-align:center;"><a href="docs/status.png" target="_blank"><img src="docs/status.png" alt="Cerberus" style="width:1000px;"></a></div> <h3 id="viewing-cerberus-validator-logs"><a href="#viewing-cerberus-validator-logs" class="header-anchor">#</a> Viewing Cerberus validator logs</h3> <p>You can run the following command if you want to see a continuous stream of logs from your Cerberus node.</p> <div class="language-bash: extra-class"><pre class="language-text"><code># will show you a continous stream of logs from your node.
sudo journalctl -u cerberusd -f
</code></pre></div><p>After running the command above, you will see a screen like the one below.</p> <div style="text-align:center;"><a href="docs/output.png" target="_blank"><img src="docs/output.png" alt="Cerberus" style="width:1000px;"></a></div> <h2 id="genesis-validator-setup"><a href="#genesis-validator-setup" class="header-anchor">#</a> Genesis Validator Setup</h2> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Genesis Validators only - If you are not running a Genesis Validator, you can disregard the below steps. We will be working directly with genesis validators that were selected to coordinate the launch of the chain.</p></div> <h3 id="genesis-validators-additional-steps"><a href="#genesis-validators-additional-steps" class="header-anchor">#</a> Genesis Validators additional steps</h3> <p>This section will outline creating a gentx to run a genesis validator. After the chain goes live, this documentation will no longer be valid.</p> <div class="custom-block warning"><p class="custom-block-title">Previous Steps required</p> <p>You should have completed all the steps outlined above before going through these steps.</p></div> <h3 id="creating-a-genesis-account"><a href="#creating-a-genesis-account" class="header-anchor">#</a> Creating a genesis account</h3> <p>You will run the command below to create a genesis account. The example below shows creating a genesis account giving each validator 5000000100000ucrbrus.</p> <p>Where <em><strong>key-name</strong></em> is you can use the key name that you created in the step <a href="#create-keys-cerberus-wallet-address">Create keys/Cerberus wallet address</a></p> <div class="language-bash extra-class"><pre class="language-bash"><code>cerberusd add-genesis-account <span class="token operator">&lt;</span>key-name<span class="token operator">&gt;</span> 5000000000000ucrbrus
</code></pre></div><h3 id="create-the-gentx"><a href="#create-the-gentx" class="header-anchor">#</a> Create the gentx</h3> <p>The commend below will generate the gentx file needed to run as a genesis validator.</p> <h4 id="commands-parameters"><a href="#commands-parameters" class="header-anchor">#</a> <strong>Commands Parameters</strong></h4> <p><em><strong>key-name</strong></em> is the key-name/wallet that you will use to fund the validator</p> <p>Where <em><strong>key-name</strong></em> is you can use the key name that you created in the step <a href="#create-keys-cerberus-wallet-address">Create keys/Cerberus wallet address</a></p> <p><em><strong>moniker</strong></em> you will use the moniker you set in the step <a href="#initiate-chain">Initiate Chain</a></p> <p><em><strong>description</strong></em> you will set a description for your Cerberus validator node.</p> <p><em><strong>security-contact</strong></em> you will add the security contact email address for your validator.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cerberusd gentx <span class="token operator">&lt;</span>key-name<span class="token operator">&gt;</span> 4000000000000ucerberusd <span class="token punctuation">\</span>
--chain-id cerberus-1 <span class="token punctuation">\</span>
--moniker<span class="token operator">=</span><span class="token variable">$MONIKER_NAME</span> <span class="token punctuation">\</span>
--commission-max-change-rate<span class="token operator">=</span><span class="token number">0.05</span> <span class="token punctuation">\</span>
--commission-max-rate<span class="token operator">=</span><span class="token number">0.20</span> <span class="token punctuation">\</span>
--commission-rate<span class="token operator">=</span><span class="token number">0.05</span> <span class="token punctuation">\</span>
--details<span class="token operator">=</span><span class="token string">&quot;XXXXXXXX&quot;</span> <span class="token punctuation">\</span>
--security-contact<span class="token operator">=</span><span class="token string">&quot;XXXXXXXX&quot;</span> <span class="token punctuation">\</span>
--website<span class="token operator">=</span><span class="token string">&quot;XXXXXXXX&quot;</span>
</code></pre></div><h3 id="submit-pull-request-with-gentx-and-peed-id"><a href="#submit-pull-request-with-gentx-and-peed-id" class="header-anchor">#</a> Submit Pull Request with Gentx and peed id</h3> <ol><li>Copy the contents of ${HOME}/.cerberus/config/gentx/gentx-XXXXXXXX.json</li> <li>Fork the repository</li> <li>Create a file gentx-.json under the networks/mainnet/gentx folder in the forked repo, paste the copied text into the file</li> <li>Create a file gentx-.json under the networks/mainnet/gentx folder in the forked repo, paste the copied text into the file</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.efce6416.js" defer></script><script src="/assets/js/2.a60af671.js" defer></script><script src="/assets/js/9.77b6a1d4.js" defer></script>
  </body>
</html>
